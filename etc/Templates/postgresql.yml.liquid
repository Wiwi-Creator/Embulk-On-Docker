exec:
  max_threads: 1
  min_output_tasks: 1

in:
  type: postgresql
  driver_path: {{ env.postgresql_driver }}
  host: {{ env.postgresql_env }}
  user: {{ env.postgresql_user }}
  password: {{ env.PASSWORD }}
  database: {{ env.database }}
  table: {{ env.table }}

out:
  type: bigquery
  mode: replace
  auth_method: compute_engine
  gcs_bucket: {{ bucket_name }}
  auto_create_gcs_bucket: true
  auto_create_table: true
  prevent_duplicate_insert: true
  project: {{ env.project }}
  dataset: {{ env.dataset }}
  table: {{ env.table }}
  compression: GZIP
  source_format: NEWLINE_DELIMITED_JSON
